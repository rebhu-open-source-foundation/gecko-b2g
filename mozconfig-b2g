# Compiler
export CC=$HOME/.mozbuild/clang/bin/clang
export CXX=$HOME/.mozbuild/clang/bin/clang++
export LLVMCONFIG=$HOME/.mozbuild/clang/bin/llvm-config
export LLVM_CONFIG=$HOME/.mozbuild/clang/bin/llvm-config
export AR=$HOME/.mozbuild/clang/bin/llvm-ar
export NM=$HOME/.mozbuild/clang/bin/llvm-nm
export RANLIB=$HOME/.mozbuild/clang/bin/llvm-ranlib
#export CBINDGEN=$HOME/.mozbuild/cbindgen/cbindgen

# Build B2G
ac_add_options --enable-application=b2g
ac_add_options --target=arm-linux-androideabi
ac_add_options --enable-linker=lld

# Disable a bunch of non critical stuff
ac_add_options --disable-crashreporter
ac_add_options --disable-webrtc
# ac_add_options --disable-printing # see https://bugzilla.mozilla.org/show_bug.cgi?id=1537586
ac_add_options --disable-updater
ac_add_options --disable-jemalloc

# Enable debugging
ac_add_options --enable-debug

# Optimize the build
ac_add_options --enable-lto
ac_add_options --disable-profiling
ac_add_options --enable-small-chunk-size
ac_add_options --disable-webrender # for now...

# With the following Android SDK and NDK:
ac_add_options --with-android-ndk="$HOME/.mozbuild/android-ndk-r17b"
ac_add_options --with-android-version=28

# Use sccache
ac_add_options --with-ccache=sccache

# Auto-clobber
mk_add_options AUTOCLOBBER=1

# Gonk-specific stuff
ac_add_options --with-gonk-gfx
ac_add_options --with-gonk="$GONK_PATH"

# Customize the objdir.
if [ -f "$GECKO_OBJDIR" ]; then
mk_add_options MOZ_OBJDIR="$GECKO_OBJDIR"
fi
